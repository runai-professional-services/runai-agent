ğŸ‰ Run:AI Agent has been deployed successfully!

{{- if .Values.monitoring.enabled }}
âœ… Monitoring sidecar is ENABLED - continuous failure analysis active
{{- else }}
â„¹ï¸  Monitoring sidecar is DISABLED - enable with: --set monitoring.enabled=true
{{- end }}

ğŸ“‹ Deployment Details:
  â€¢ Release Name: {{ .Release.Name }}
  â€¢ Namespace: {{ include "runai-agent.namespace" . }}
  â€¢ Deployment: {{ include "runai-agent.fullname" . }}

ğŸ”§ Components:
  â€¢ Main Agent: Chat interface + API
  {{- if .Values.monitoring.enabled }}
  â€¢ Monitoring Sidecar: Polling every {{ .Values.monitoring.pollInterval }}s
  {{- end }}
  {{- if .Values.failureAnalysis.persistence.enabled }}
  â€¢ Failure Database: {{ include "runai-agent.pvcName" . }} ({{ .Values.failureAnalysis.persistence.size }})
  {{- end }}

ğŸš€ Access the Agent:

1. Check pod status:
   kubectl get pods -n {{ include "runai-agent.namespace" . }} -l app.kubernetes.io/name={{ include "runai-agent.name" . }}

{{- if .Values.monitoring.enabled }}
   Expected: 2/2 containers running (agent + sidecar)
{{- else }}
   Expected: 1/1 container running
{{- end }}

2. View logs:
   # Get pod name
   POD_NAME=$(kubectl get pods -n {{ include "runai-agent.namespace" . }} -l app.kubernetes.io/name={{ include "runai-agent.name" . }} -o jsonpath='{.items[0].metadata.name}')
   
   # Main agent logs
   kubectl logs -n {{ include "runai-agent.namespace" . }} $POD_NAME -c nat-agent -f

{{- if .Values.monitoring.enabled }}
   # Monitoring sidecar logs
   kubectl logs -n {{ include "runai-agent.namespace" . }} $POD_NAME -c monitor-sidecar -f
{{- end }}

3. Access the UI:
   # Port-forward for local access
   kubectl port-forward -n {{ include "runai-agent.namespace" . }} deployment/{{ include "runai-agent.fullname" . }} 3000:3000

   Then open: http://localhost:3000

   {{- if .Values.ingress.enabled }}
   # Or access via Ingress at: {{ (index .Values.ingress.hosts 0).host }}
   {{- end }}

ğŸ“Š Test the Failure Analysis:

Once the agent is running, try these queries in the chat:

  â€¢ "Show me failure statistics"
  â€¢ "Analyze failures from the last 7 days"
  â€¢ "How do I fix OOMKilled failures?"
{{- if .Values.monitoring.enabled }}
  â€¢ "What's the monitoring status?"
{{- end }}

{{- if .Values.failureAnalysis.persistence.enabled }}

ğŸ’¾ Database Location:

The failure history database is stored at:
  {{ .Values.failureAnalysis.database.path }}

To inspect the database directly:
  POD_NAME=$(kubectl get pods -n {{ include "runai-agent.namespace" . }} -l app.kubernetes.io/name={{ include "runai-agent.name" . }} -o jsonpath='{.items[0].metadata.name}')
  kubectl exec -it -n {{ include "runai-agent.namespace" . }} $POD_NAME -c nat-agent -- sqlite3 {{ .Values.failureAnalysis.database.path }}

{{- end }}

ğŸ”§ Configuration:

To customize the deployment:
  helm upgrade {{ .Release.Name }} ./deploy/helm/runai-agent \
    --set runai.clientId="your-id" \
    --set runai.clientSecret="your-secret" \
    --set runai.baseUrl="https://your-cluster.run.ai" \
    --set nvidia.apiKey="your-api-key"

ğŸ“š Documentation:

  â€¢ Quick Start: docs/QUICKSTART.md
  â€¢ Deployment Guide: docs/DEPLOYMENT.md
  â€¢ Sidecar Setup: docs/SIDECAR_DEPLOYMENT.md
  â€¢ Failure Analysis: docs/FAILURE_ANALYSIS.md

ğŸ› Troubleshooting:

If the pod is not starting:
  kubectl describe pod -n {{ include "runai-agent.namespace" . }} -l app.kubernetes.io/name={{ include "runai-agent.name" . }}
  kubectl logs -n {{ include "runai-agent.namespace" . }} deployment/{{ include "runai-agent.fullname" . }} -c nat-agent

{{- if .Values.monitoring.enabled }}
If sidecar is not working:
  kubectl logs -n {{ include "runai-agent.namespace" . }} deployment/{{ include "runai-agent.fullname" . }} -c monitor-sidecar
{{- end }}

{{- if and .Values.failureAnalysis.persistence.enabled (not .Values.failureAnalysis.persistence.existingClaim) }}
If PVC is pending:
  kubectl describe pvc {{ include "runai-agent.pvcName" . }} -n {{ include "runai-agent.namespace" . }}
  # Check available storage classes
  kubectl get storageclass
{{- end }}

---
Built with â¤ï¸ using NVIDIA NeMo Agent Toolkit

