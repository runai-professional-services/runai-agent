{{- if not .Values.runai.existingSecret }}
---
# Secret for Run:AI credentials
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "runai-agent.fullname" . }}-runai-creds
  namespace: {{ include "runai-agent.namespace" . }}
  labels:
    {{- include "runai-agent.labels" . | nindent 4 }}
type: Opaque
stringData:
  RUNAI_CLIENT_ID: {{ .Values.runai.clientId | quote }}
  RUNAI_CLIENT_SECRET: {{ .Values.runai.clientSecret | quote }}
  RUNAI_BASE_URL: {{ .Values.runai.baseUrl | quote }}
{{- end }}

{{- if not .Values.nvidia.existingSecret }}
---
# Secret for NVIDIA API key
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "runai-agent.fullname" . }}-nvidia-key
  namespace: {{ include "runai-agent.namespace" . }}
  labels:
    {{- include "runai-agent.labels" . | nindent 4 }}
type: Opaque
stringData:
  NVIDIA_API_KEY: {{ .Values.nvidia.apiKey | quote }}
{{- end }}

{{- if and .Values.github.token (not .Values.github.existingSecret) }}
---
# Secret for GitHub token
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "runai-agent.fullname" . }}-github-token
  namespace: {{ include "runai-agent.namespace" . }}
  labels:
    {{- include "runai-agent.labels" . | nindent 4 }}
type: Opaque
stringData:
  GITHUB_TOKEN: {{ .Values.github.token | quote }}
{{- end }}

